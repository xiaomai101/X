/******************************************
 * @name 海角社区
 * @description 海角社区解锁付费内容包括音频
 * @statement 仅供学习交流|禁止用于商业用途|违者后果自负|
              转载请注明来源|欢迎分享|拒绝倒卖|倒卖🐕必死🐎
 * @author 𝒀𝒖𝒉𝒆𝒏𝒈
 * @channel https://t.me/yqc_123
 * @feedback https://t.me/yqc_777
 * @update 20231008
 * @version 1.0.8
******************************************
#更新日志：
### 1.0.8(20231008)
	* 适配Surge, 感谢@miniers群友的反馈
    * 修复解锁问题
    * 不使用btoa/atob方法, 使用第三方.
### 1.0.7(20231001)国庆节快乐🎉
    * 解锁个人中心
    * 去掉部分广告
    * 修复图片帖子解锁问题
    * 优化代码, 使用代理工具环境自带的一些方法
### 1.0.6(20231001)
    * 解锁付费音频
### 1.0.5(20230929)❗❗❗本版本包括之后版本点击播放后存在网络请求，故请等待1-3秒(取决于你的网络环境)
    * 修复付费视频播放问题

hostname = *hj*,*haijiao*

^http[s]?:\/\/.*(haijiao|hj).+api\/(topic.+\d+|attachment|login\/signin|user\/(current|info\/\d+)|banner\/banner_list)$ url script-response-body https://raw.githubusercontent.com/Yuheng0101/X/main/Scripts/haijiao.js

******************************************/
var version_='jsjiami.com.v7';var _0xaceae=_0x54c2;function _0x54c2(_0x44e775,_0x719b15){var _0x1ab6c4=_0x1ab6();return _0x54c2=function(_0x54c2a8,_0x326bee){_0x54c2a8=_0x54c2a8-0xf8;var _0x59b06b=_0x1ab6c4[_0x54c2a8];if(_0x54c2['xGLAOb']===undefined){var _0x48b214=function(_0x43bb5a){var _0x3fa1c0='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';var _0x3527ef='',_0x1b9e57='';for(var _0x1eca44=0x0,_0x4005a1,_0x4b5dd8,_0x462730=0x0;_0x4b5dd8=_0x43bb5a['charAt'](_0x462730++);~_0x4b5dd8&&(_0x4005a1=_0x1eca44%0x4?_0x4005a1*0x40+_0x4b5dd8:_0x4b5dd8,_0x1eca44++%0x4)?_0x3527ef+=String['fromCharCode'](0xff&_0x4005a1>>(-0x2*_0x1eca44&0x6)):0x0){_0x4b5dd8=_0x3fa1c0['indexOf'](_0x4b5dd8);}for(var _0x5b448d=0x0,_0x19458c=_0x3527ef['length'];_0x5b448d<_0x19458c;_0x5b448d++){_0x1b9e57+='%'+('00'+_0x3527ef['charCodeAt'](_0x5b448d)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x1b9e57);};var _0x5b139c=function(_0x20773,_0x1570b7){var _0x369aa9=[],_0x1fe6e9=0x0,_0x7a5731,_0x17d524='';_0x20773=_0x48b214(_0x20773);var _0x300037;for(_0x300037=0x0;_0x300037<0x100;_0x300037++){_0x369aa9[_0x300037]=_0x300037;}for(_0x300037=0x0;_0x300037<0x100;_0x300037++){_0x1fe6e9=(_0x1fe6e9+_0x369aa9[_0x300037]+_0x1570b7['charCodeAt'](_0x300037%_0x1570b7['length']))%0x100,_0x7a5731=_0x369aa9[_0x300037],_0x369aa9[_0x300037]=_0x369aa9[_0x1fe6e9],_0x369aa9[_0x1fe6e9]=_0x7a5731;}_0x300037=0x0,_0x1fe6e9=0x0;for(var _0x2996c7=0x0;_0x2996c7<_0x20773['length'];_0x2996c7++){_0x300037=(_0x300037+0x1)%0x100,_0x1fe6e9=(_0x1fe6e9+_0x369aa9[_0x300037])%0x100,_0x7a5731=_0x369aa9[_0x300037],_0x369aa9[_0x300037]=_0x369aa9[_0x1fe6e9],_0x369aa9[_0x1fe6e9]=_0x7a5731,_0x17d524+=String['fromCharCode'](_0x20773['charCodeAt'](_0x2996c7)^_0x369aa9[(_0x369aa9[_0x300037]+_0x369aa9[_0x1fe6e9])%0x100]);}return _0x17d524;};_0x54c2['PWrTEh']=_0x5b139c,_0x44e775=arguments,_0x54c2['xGLAOb']=!![];}var _0x1ebb29=_0x1ab6c4[0x0],_0x3e168a=_0x54c2a8+_0x1ebb29,_0x45099b=_0x44e775[_0x3e168a];return!_0x45099b?(_0x54c2['rgEpeE']===undefined&&(_0x54c2['rgEpeE']=!![]),_0x59b06b=_0x54c2['PWrTEh'](_0x59b06b,_0x326bee),_0x44e775[_0x3e168a]=_0x59b06b):_0x59b06b=_0x45099b,_0x59b06b;},_0x54c2(_0x44e775,_0x719b15);}function _0x1ab6(){var _0x3daa65=(function(){return[version_,'hdnCjlOsjBieaHrhmiK.AIcCoPNHmwt.pwvFCq7u==','wmkMW4/cKSkM','BmkQWOHr','q8o7WOldISkK','WPxcLbrVW4m','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','W6D/W5G8mmoz','5Rsv6kEs56ER5y6py8kKgNtdQsrt','WQepWPtdK8oiW5GUWOFdHG','WQPXWPq1vW1Fka','WQW2ma','WPOcjSknWPCzWQWiW6q','hsTNWR8','W5xdNqfk','W6VdQJrtWR7dOudcJ8kW','ACkIWPjqWQP9D1e','WQxcHmo0W4eS','W5/dL0KXWOfFx8o/CXjzyq','tmosWPS','W5KMWPudWORdM2P/WPCsjYi','W7mVW7u2BIC9fJFdOmkDuCkEWOH0W7G0WPeRfY7cLIVcVwZcKaFcPCk8WP8KW63cM2asqKTnicBdRSojCmkRW7BdReRcVmklm3z1CSkAnwOanCo5k2Lcq3ddVSkJFrXAW4hcVCkfW6DI','WReWkmkCW59YpSonW7BcR0XrBmoOb3qCBclcT8oiW4FcKJr4Fmo4W5G2imk5WPJdS8ozW6Crjf1bWOpdSKa5WODWWOhdLaCMDLtcP0FcOXfAaSooWRNcNwCWWRxcSmkxvLGFW7Ofz0JcSSk+','WOmDrSo4ca','WPugyuqvWPpcPxpdNcRcKq','WRSpWOlcHG','W7fBemoAeZ3cI8o8fmk7W7/dLSkYAarz','csDKWRtcTYVdH8obhG','WQeaxmkzbdFcIG','fCkvvSo3trxcVSkc','WRRcPSojW4yoW4Khaa','eZvJWOG','hb8JWQhdHCkJCG1J','W4uXWOddGJa','CCoyWPNdJCkZ','n8oMWRbCW47dR8kEW5S','A8k3WPjuWQ56Ae0yjWm','W6e4w3nR','WRaaW5nDW5VcIq','sSoLW4Xb','W5uAWQFdMW','W4uumePyWP/dOG','rtxcP1m','WOr2W45CW53cIG','bhuUW4RcP8oQoCoJyXrn','q8oRW5zfs8ksymkgWP12','WP7cQSouW6utW4e7bIC','WO3dUgxcGWRdVLhcTa','WPStjmkiWPGDWQa','WQmiW4XeW5tcNSow','WRWhlCkjWO8','W6TAW7qqpa','kH0iWOpdUG','W67cRSojW64','W43dQmkGW4pdRYm1W59n'].concat((function(){return['W47dKSkbW7NdSG','a3tcOCouq8k+fNldRc5E','CXZdT1VcI8khfmoytaHrW5hdSG','WQapW4ldHSoxW5qUWPq','W682qwrMpce6ESo7k8k3Aay','W7bxW4ldO8oyW6K3WQO','W5iJWPqkWPtdNZiQW55MqhVdVxFcVCokWOOMW7K','W4ZdSSk3W6JdOYmL','i8obWOH6W5O','W7zwW4JdPmoQW643W6/dHmkhWQC5nmo+','vmoDD8oJ','W5qmWRhdNq','BSkSWOHq','W6bzWOXeW7lcRSo2WQ/dUW','wCosWOldTmk2W4JdGSoFiG','mYuFW4Soj1lcV8km','wc94WPpdS8oA','W6VdRSkjW402oeRdJgDqWQ0uBSoH','wwy8W4G3hCoUkmkgW4XJWQa','W7C0W6y','W5ddNMNcQ8kIWQNdRJtcJa','e8ktnmkWoGZcO8kniGRcGq','W7pdTdK','W5dcP8oCW6SdWPO','sw/cTh/dGW','W7hdQSkxW601m0/dJgq','De3cTL3dLG','W7rnW5ldSCoSW6GUWQFdHSkwWRO','W7BdVCkw','WQemW45BW5a','W63dQt3dOW','W5mDWRddGcPgfSkrWO4','W7xcHMFcLra','WQ0SoCkc','WOjjWQhdHIPvdCkyWPVcLCoFbsKoW4LxAtRcKmolW4aowZrvWOtcLrJdM8oCWPlcLNpcK8oZWOBcM8ovWPNcSCkAWQlcSYyQWP/cO8ofWQ1mqq','W6RdRJvz','xCkUW5xcLCkhWPRdMvVdGa','WRKIWRK','W7WMWOqgAdzabW','WPlcIZxcOG','W64OW6q0','WPNcVCov','WP/cOufZWQ8','WPbYW59aW5W','W4hdTI91WQe','bt1NWPDGta','WRtdOxNdR0vZW7f2pW','WPxcHrrJ','pJr+WR7cQa','WR41WRGMimo/ymk4zW','pZOmpmod','F8kXWOO','utFdPSkdfSk/dhVdQJbb','qHRcVvdcVG','WOLuj2upWQ3dUq'].concat((function(){return['p2JcIJddLa','W5yyW7exBq','W78+W6iPExG','W6dcPJOrWQi','W7FdQSkjW7y','WQP4W7rcW5aLCW3dUmo3kSoJW7y','W5DZfa','WP0EmCkk','bMxcTSohwCkMdW','W5aBiuTe','WQOWlSkfW4iVEmkeW6C','WOpcQuzqWR0gdW7cPfFdLYNdUmkL','xdvVWP3dTmoxlmobAWf5','vNZdPSojeSkQs2VcSW','W7LHWOq4fCoQx8kP','cuFcUSoNuq','WRT1WPa8uqfi','gHG0WRO','BSo4WOxdO8kO','dYD6WQ8','DHFcH2dcUa','W4VdUmk6W67dVZ0L','WOr8W4nw','W5xdLWXDW5W2WO0','uctcOeBcKN4EbmkOW7VcJG','W5ldNqfBW4aOWO0','xIbVWP/dVW','WRNdUsddPvz8WRDZz2OlzwpcJSolWOTBW54CWOjpW7vkW7zPW5FdQmkWW7JcKhNdIq/cJXjJWRldUdzlW71wW7fmfZldJ0Tiya91W4O','iqixo8oZWPW','W67cV8ojW6ij','csnNWR/cRcm','W4qgWQZdJa','W6GJkYlcLui','WPeWsNJdQ8o6W4moW6FdJcLvWOS','W6znW5tdUCoHW6CQWQtdKq','W6buhSofxgBdM8oBnColWPdcQ8kB','WRKdWOe','mr3dTr3cHGmoirdcOCoozW','nsmb','W7BcPs3dUCk4','v2tcNuZdNq','W53cJJdcSCofWONdNXJcJ8oHWOFcNCoGqCofW4jHWPBcK8kfnmoOmmoWdmoUW4emW6pdImkOgCkyWOjqy8ourCoTW4RdQSkFvCoRpaS6WRvqDuJdVSkZW7BdRSkJda','omoOWQm','bMhcOCou','xmkkWPpdP2y','W6hdUcRdOq9/WRC','W6lcQZhdRW','WRStWOhcLW','WRBdGeOHWQ3dMHFcLrC','W6/cTWddQmkOcq','wwa1W48YgmoOkmkiW6HjWQu','wmodWP3dSSkSW4RdVSolnW','cqpdGr7dPa'];}()));}()));}());_0x1ab6=function(){return _0x3daa65;};return _0x1ab6();};(function(_0x3069a5,_0x1eaaaf,_0xe870a,_0x3a73f2,_0x323fa2,_0x3b1dde,_0x13b9f2){return _0x3069a5=_0x3069a5>>0x4,_0x3b1dde='hs',_0x13b9f2='hs',function(_0x402d94,_0x14a337,_0xf8203d,_0x31d406,_0x24d4f5){var _0x481bc9=_0x54c2;_0x31d406='tfi',_0x3b1dde=_0x31d406+_0x3b1dde,_0x24d4f5='up',_0x13b9f2+=_0x24d4f5,_0x3b1dde=_0xf8203d(_0x3b1dde),_0x13b9f2=_0xf8203d(_0x13b9f2),_0xf8203d=0x0;var _0x134619=_0x402d94();while(!![]&&--_0x3a73f2+_0x14a337){try{_0x31d406=-parseInt(_0x481bc9(0x196,'p#60'))/0x1*(parseInt(_0x481bc9(0x143,'CYir'))/0x2)+-parseInt(_0x481bc9(0x169,'0jeP'))/0x3+-parseInt(_0x481bc9(0x111,'NaM['))/0x4+-parseInt(_0x481bc9(0x11c,'^pQe'))/0x5*(-parseInt(_0x481bc9(0x104,'JO9H'))/0x6)+-parseInt(_0x481bc9(0x121,'s^7J'))/0x7*(-parseInt(_0x481bc9(0x135,'QhI1'))/0x8)+-parseInt(_0x481bc9(0x18b,'xTxg'))/0x9*(-parseInt(_0x481bc9(0x107,'8G!F'))/0xa)+-parseInt(_0x481bc9(0x182,'!yhw'))/0xb*(-parseInt(_0x481bc9(0x16b,'Zd98'))/0xc);}catch(_0x1771e5){_0x31d406=_0xf8203d;}finally{_0x24d4f5=_0x134619[_0x3b1dde]();if(_0x3069a5<=_0x3a73f2)_0xf8203d?_0x323fa2?_0x31d406=_0x24d4f5:_0x323fa2=_0x24d4f5:_0xf8203d=_0x24d4f5;else{if(_0xf8203d==_0x323fa2['replace'](/[ehwuKnHIdABtOplFNrqCP=]/g,'')){if(_0x31d406===_0x14a337){_0x134619['un'+_0x3b1dde](_0x24d4f5);break;}_0x134619[_0x13b9f2](_0x24d4f5);}}}}}(_0xe870a,_0x1eaaaf,function(_0x5ec28c,_0x576f76,_0x1053d9,_0x463d5f,_0x4fc10b,_0xfe018e,_0x42004a){return _0x576f76='\x73\x70\x6c\x69\x74',_0x5ec28c=arguments[0x0],_0x5ec28c=_0x5ec28c[_0x576f76](''),_0x1053d9='\x72\x65\x76\x65\x72\x73\x65',_0x5ec28c=_0x5ec28c[_0x1053d9]('\x76'),_0x463d5f='\x6a\x6f\x69\x6e',(0x142299,_0x5ec28c[_0x463d5f](''));});}(0xc60,0x84394,_0x1ab6,0xc8),_0x1ab6)&&(version_=_0x1ab6);var $=new Env(_0xaceae(0x181,'CYir')),{body:body}=$response,utf8=new Utf8(),base64=new Base64(),haijiao=new Haijiao();if(/api\/topic\/\d+/[_0xaceae(0x192,'*V7y')]($request[_0xaceae(0x14c,'6thf')])){var obj=JSON['parse'](body),_decrypt=haijiao[_0xaceae(0x173,'csLn')](obj['data']),_prefix=$request[_0xaceae(0x138,'3qCd')][_0xaceae(0xfd,'lnM7')](/(http[s]?:\/\/[^\/]+)\//)[0x1];const getVarType=_0x54da86=>{var _0x2056c2=_0xaceae,_0x3d9472={'xOyIM':_0x2056c2(0x17a,'X!W^'),'kGoRq':'images'};return _0x54da86[_0x2056c2(0x186,'eo6^')](_0xef9e23=>_0xef9e23[_0x2056c2(0x189,'N%Ny')]===_0x2056c2(0x17a,'X!W^'))?_0x3d9472['xOyIM']:_0x54da86[_0x2056c2(0x17c,'N%Ny')](_0x1f4cc9=>_0x1f4cc9[_0x2056c2(0xfb,'t^]@')]==='audio')?_0x2056c2(0x172,'Qw1I'):_0x3d9472[_0x2056c2(0x155,'CYir')];};var _type=getVarType(_decrypt['attachments']),_index=_decrypt[_0xaceae(0x15e,'dUDb')][_0xaceae(0x133,'YsH7')](_0xba06cc=>_0xba06cc[_0xaceae(0x183,'QhI1')]===_type),htmlMap={'images':'','video':_0xaceae(0x161,'csLn')+_decrypt[_0xaceae(0x12a,'!yhw')][_index]['id']+_0xaceae(0x193,'0jeP'),'audio':_0xaceae(0x16f,'CheO')+_decrypt[_0xaceae(0x110,'CYir')][_index][_0xaceae(0x140,'JABC')]+_0xaceae(0x131,'ID7F')},_shuffix=_decrypt[_0xaceae(0x152,'JO9H')][_index]?.[_0xaceae(0x106,'3qCd')]||'',_url=_shuffix&&!_shuffix[_0xaceae(0x114,'!yhw')](_0xaceae(0x198,'JO9H'))?/http/[_0xaceae(0x14a,'NG$g')](_shuffix)?_shuffix:_prefix+_shuffix:'';__crack(_url)[_0xaceae(0x14d,'c3F*')](_0x4863f5=>{var _0x935b58=_0xaceae,_0x4bca3c={'EvYKQ':function(_0x533370,_0x398321,_0x5bdde5){return _0x533370(_0x398321,_0x5bdde5);},'aOXet':function(_0x12be9e,_0xef739c){return _0x12be9e+_0xef739c;},'XqqIX':function(_0x5b17a7,_0x2c6c68){return _0x5b17a7-_0x2c6c68;}};_0x4863f5&&(_decrypt[_0x935b58(0xfc,'N%Ny')][_index][_0x935b58(0x188,'nOat')]=_0x4863f5),_decrypt[_0x935b58(0x116,'a4AO')]=_decrypt[_0x935b58(0x15f,'bbUr')][_0x935b58(0x109,'^pQe')](_0x935b58(0x126,'3qCd'),_0x935b58(0x17f,'6thf'))[_0x935b58(0x156,'QhI1')](/<span class=\"sell-btn\" data-floor=\"0\"><span data-sell=\"0\" class=\"sell_line1\">(.*)<\/span><span data-sell=\"0\" class=\"sell_line2\">(.*)购买(.*)<\/span>/,htmlMap[_type]),_decrypt['hasOwnProperty'](_0x935b58(0x136,'CheO'))&&(_decrypt[_0x935b58(0x10d,'8wM^')][_0x935b58(0x177,'ZIHk')]=!![],_decrypt['sale']['buy_index']=_0x4bca3c[_0x935b58(0x10c,'!dRu')](parseInt,_0x4bca3c[_0x935b58(0x10f,'a4AO')](Math['random']()*(_0x4bca3c['XqqIX'](0x1388,0x3e8)+0x1),0x3e8),0xa)),$['done']({'body':JSON[_0x935b58(0x185,'c3F*')]({...obj,'isEncrypted':![],'data':_decrypt})});})[_0xaceae(0x17b,'YsH7')](_0x52473c=>{var _0x4b4a05=_0xaceae;console[_0x4b4a05(0x170,'t^]@')](_0x52473c),$[_0x4b4a05(0x165,'ID7F')]({});});}else{if(/api\/topic\/att\/\d+/['test']($request[_0xaceae(0x134,'JABC')])){var obj=JSON[_0xaceae(0x16d,'ZIHk')](body),_decrypt=haijiao[_0xaceae(0x14e,'CYir')](obj[_0xaceae(0x171,'CYir')]);_decrypt['forEach'](_0x1f429a=>{var _0xaf2acb=_0xaceae,_0x19148c={'MmRLr':'/api/address'},_0x4363c5=_0x1f429a?.['url']||_decrypt[0x0][_0xaf2acb(0x16c,'O%BC')];_0x1f429a[_0xaf2acb(0x142,'N%Ny')]=_0x4363c5[_0xaf2acb(0x195,'0jeP')](_0x19148c['MmRLr'],'https://ts2.hjf5e.com/hjstore'),_0x1f429a[_0xaf2acb(0x197,'3qCd')]=0x0;}),$['done']({'body':JSON[_0xaceae(0x11e,'O%BC')]({...obj,'isEncrypted':![],'data':_decrypt})});}else{if(/api\/attachment/[_0xaceae(0x11a,'ID7F')]($request['url'])){var tvqoLl=_0xaceae(0x13d,'csLn')['split']('|'),tOiMwn=0x0;while(!![]){switch(tvqoLl[tOiMwn++]){case'0':var _decrypt=haijiao[_0xaceae(0x15d,'bbUr')](obj['data']);continue;case'1':var obj=JSON[_0xaceae(0x129,'Zd98')](body);continue;case'2':var _shuffix=_decrypt[_0xaceae(0x194,'eo6^')];continue;case'3':var _prefix=$request['url']['match'](/(http[s]?:\/\/[^\/]+)\//)[0x1];continue;case'4':__crack(_prefix+_shuffix)[_0xaceae(0x130,'mo!x')](_0x55f5a2=>{var _0x350f94=_0xaceae,_0x434a50={'sJiwO':_0x350f94(0x191,'6q]z')},_0xc10b02=_0x434a50[_0x350f94(0x144,'dUDb')][_0x350f94(0x163,'8wM^')]('|'),_0x2e8e9b=0x0;while(!![]){switch(_0xc10b02[_0x2e8e9b++]){case'0':_decrypt[_0x350f94(0x125,'csLn')]=0x0;continue;case'1':$[_0x350f94(0x15c,'S4wX')]({'body':JSON[_0x350f94(0x150,'mo!x')]({...obj,'isEncrypted':![],'data':_decrypt})});continue;case'2':_decrypt[_0x350f94(0x119,'p#60')]=0x1;continue;case'3':_decrypt['money_type']=0x0;continue;case'4':_decrypt[_0x350f94(0xfe,'^pQe')]=0x0;continue;case'5':_decrypt[_0x350f94(0x11d,'xWg@')]=_0x55f5a2;continue;}break;}})[_0xaceae(0x160,'JO9H')](_0x3e2bb1=>{var _0x2bb71b=_0xaceae;console['log'](_0x3e2bb1),$[_0x2bb71b(0x174,'ZIHk')]({});});continue;}break;}}else{if(/(login\/signin)|(user\/(current|info\/\d+))/[_0xaceae(0x102,'dUDb')]($request['url'])){var obj=JSON[_0xaceae(0x13a,'S4wX')](body),_decrypt=haijiao[_0xaceae(0x145,'u25X')](obj[_0xaceae(0xff,'a0IX')]);const modifyUser=_0x36dcab=>{var _0x495c39=_0xaceae,_0x28abc1={'XyvIk':_0x495c39(0x100,'ID7F'),'PROcf':_0x495c39(0x18f,'mo!x'),'xFJXh':'𝘠𝘶𝘩𝘦𝘯𝘨','UDAis':'https://t.me/yqc_123','hLmQf':_0x495c39(0x115,'S4wX')};return _0x36dcab[_0x495c39(0x151,'Y*v6')](_0x28abc1[_0x495c39(0x13b,'nOat')])&&(_0x36dcab['user']={..._0x36dcab[_0x495c39(0x137,'X^gy')],'title':{..._0x36dcab[_0x495c39(0x157,'!dRu')][_0x495c39(0x139,'Y*v6')],'name':'神豪','icon':_0x28abc1['PROcf']}}),{..._0x36dcab,'nickname':_0x28abc1[_0x495c39(0x146,'NaM[')],'avatar':'0','description':_0x28abc1['UDAis'],'title':{..._0x36dcab['title'],'name':'神豪','icon':_0x495c39(0x18e,'X^gy')},'vip':0x4,'vipExpiresTime':_0x28abc1[_0x495c39(0x17d,'xWg@')],'famous':!![],'popularity':0x3e7,'hasGaEnabled':!![]};};_decrypt=modifyUser(_decrypt),$['done']({'body':JSON[_0xaceae(0x179,'xWg@')]({...obj,'isEncrypted':![],'data':_decrypt})});}else{if(/banner\/banner_list/[_0xaceae(0x159,'eo6^')]($request[_0xaceae(0x12b,'NG$g')])){var obj=JSON[_0xaceae(0x14f,'6q]z')](body);$['done']({'body':JSON[_0xaceae(0x12e,'ID7F')]({...obj,'data':'WW01V2MySkJQVDA9'})});}else $[_0xaceae(0x187,'bbUr')]({});}}}}async function __crack(_0x1c2f67){var _0x30216f=_0xaceae,_0x1745ac={'bPBsH':function(_0x49d204,_0x4ed2ec,_0x2cd9d4){return _0x49d204(_0x4ed2ec,_0x2cd9d4);},'prTfx':function(_0x1f77b6,_0x5d8ea8){return _0x1f77b6+_0x5d8ea8;},'wKDeE':function(_0x12bd78,_0x4c283a){return _0x12bd78*_0x4c283a;},'Evwek':function(_0x4bed62,_0x43716d){return _0x4bed62-_0x43716d;},'SHYbn':_0x30216f(0x153,'CYir'),'ffXAP':function(_0xcbbf2a,_0x4b1440){return _0xcbbf2a(_0x4b1440);},'LNAFo':function(_0x1f824d,_0x150048){return _0x1f824d+_0x150048;},'bAXXS':function(_0xa83aa,_0xade69e){return _0xa83aa!==_0xade69e;},'IKMKK':'NzKKu','MCpQp':'Content-Length','ZovVq':_0x30216f(0x118,'!yhw'),'wFLCs':function(_0x591027,_0x2460d2){return _0x591027===_0x2460d2;},'QuyOo':function(_0x53b905,_0x36fd06){return _0x53b905!==_0x36fd06;},'Uqymv':'woQDj','EOjxj':'$1.m3u8','eXBkt':'TZYXp'},_0x37326f='';try{if(_0x1745ac['bAXXS']('NzKKu',_0x1745ac[_0x30216f(0x18a,'3qCd')]))_0x34bdcb[_0x30216f(0x11b,'N%Ny')]({});else{var _0x458b3d=$request['headers'];if(_0x458b3d['hasOwnProperty'](_0x1745ac[_0x30216f(0x147,'X^gy')]))delete _0x458b3d[_0x1745ac[_0x30216f(0x127,'Zd98')]];if(_0x458b3d[_0x30216f(0x120,'NG$g')](_0x1745ac[_0x30216f(0xfa,'xWg@')]))delete _0x458b3d[_0x30216f(0x113,'lnM7')];var {statusCode:_0x1232f7,body:_0x1baaf6}=await $[_0x30216f(0x12d,'csLn')][_0x30216f(0x18c,'xWg@')]({'url':_0x1c2f67,'headers':_0x458b3d});_0x1745ac[_0x30216f(0x117,'t^]@')](_0x1232f7,0xc8)&&(_0x1745ac[_0x30216f(0x190,'C58t')](_0x30216f(0x10b,'Oadm'),_0x1745ac[_0x30216f(0x10a,'c3F*')])?_0x37326f=_0x1baaf6['split']('\x0a')[0x6][_0x30216f(0x108,'c3F*')](/(\w+_*)\d+\.ts/,_0x1745ac[_0x30216f(0x158,'xWg@')]):(_0x711b1d[_0x30216f(0x132,'nOat')][_0x30216f(0x162,'c5zS')]=!![],_0x4ef4aa[_0x30216f(0x13e,'xTxg')][_0x30216f(0x10e,'a4AO')]=_0x1745ac[_0x30216f(0x149,'2Xcs')](_0xfa33c9,_0x1745ac['prTfx'](_0x1745ac[_0x30216f(0x141,'c5zS')](_0x515e27[_0x30216f(0x164,'eo6^')](),_0x1745ac[_0x30216f(0x13f,'eo6^')](0x1388,0x3e8)+0x1),0x3e8),0xa)));}}catch(_0x40d9e1){if(_0x1745ac[_0x30216f(0xf9,'ID7F')]!=='TZYXp'){var _0x21968a=_0x1745ac[_0x30216f(0x16e,'Zd98')][_0x30216f(0x17e,'xTxg')]('|'),_0x234fa8=0x0;while(!![]){switch(_0x21968a[_0x234fa8++]){case'0':var _0x294371=_0x46b062[_0x30216f(0x11d,'xWg@')];continue;case'1':_0x1745ac['ffXAP'](_0x106024,_0x1745ac[_0x30216f(0x12f,'8G!F')](_0x38563d,_0x294371))['then'](_0x43196e=>{var _0xd7323=_0x30216f;_0x46b062[_0xd7323(0x128,'NG$g')]=_0x43196e,_0x46b062[_0xd7323(0x175,'*V7y')]=0x1,_0x46b062['amount']=0x0,_0x46b062[_0xd7323(0x105,'a0IX')]=0x0,_0x46b062[_0xd7323(0x16a,'*V7y')]=0x0,_0x7f6be2['done']({'body':_0x48fc81[_0xd7323(0xf8,'!dRu')]({..._0x3c295a,'isEncrypted':![],'data':_0x46b062})});})['catch'](_0xe0de0=>{_0x5e5ef5['log'](_0xe0de0),_0x51dbd1['done']({});});continue;case'2':var _0x38563d=_0x1b34b7[_0x30216f(0x184,'mo!x')]['match'](/(http[s]?:\/\/[^\/]+)\//)[0x1];continue;case'3':var _0x46b062=_0x4eeb5c['decrypt'](_0x3c295a[_0x30216f(0xff,'a0IX')]);continue;case'4':var _0x3c295a=_0x4949c6[_0x30216f(0x12c,'^pQe')](_0x2f0fbf);continue;}break;}}else console[_0x30216f(0x122,'X^gy')](_0x40d9e1);}return _0x37326f;}function Haijiao(){var _0x3b064c=_0xaceae,_0x23b7c4={'RIxGt':function(_0x34d001,_0x2b5444){return _0x34d001==_0x2b5444;},'GGSGI':_0x3b064c(0x180,'Oadm')};return new class{[_0x3b064c(0x101,'6q]z')](_0x2f4453){var _0x1ef49b=_0x3b064c;return _0x23b7c4['RIxGt'](_0x23b7c4[_0x1ef49b(0x15a,'dUDb')],typeof _0x2f4453)&&(_0x2f4453=JSON[_0x1ef49b(0x168,'!yhw')](_0x2f4453)),base64[_0x1ef49b(0x166,'cAEn')](base64['encode'](base64[_0x1ef49b(0x11f,'JO9H')](utf8[_0x1ef49b(0x13c,'s^7J')](_0x2f4453))));}[_0x3b064c(0x15b,'a4AO')](_0x2f6400){var _0x5e6142=_0x3b064c;return JSON[_0x5e6142(0x129,'Zd98')](utf8[_0x5e6142(0x148,'X^gy')](base64['decode'](base64[_0x5e6142(0x103,'S4wX')](base64['decode'](_0x2f6400)))));}}();}var version_ = 'jsjiami.com.v7';// prettier-ignore
function Utf8(){return new class{constructor(){this.byteArray=null,this.byteCount=null,this.byteIndex=null}ucs2decode(r){for(var e,t,n=[],o=0,a=r.length;o<a;)(e=r.charCodeAt(o++))>=55296&&e<=56319&&o<a?56320==(64512&(t=r.charCodeAt(o++)))?n.push(((1023&e)<<10)+(1023&t)+65536):(n.push(e),o--):n.push(e);return n}ucs2encode(r){for(var e,t=r.length,n=-1,o="";++n<t;)(e=r[n])>65535&&(o+=String.fromCharCode((e-=65536)>>>10&1023|55296),e=56320|1023&e),o+=String.fromCharCode(e);return o}checkScalarValue(r){if(r>=55296&&r<=57343)throw Error("Lone surrogate U+"+r.toString(16).toUpperCase()+" is not a scalar value")}createByte(r,e){return String.fromCharCode(r>>e&63|128)}encodeCodePoint(r){if(0==(4294967168&r))return String.fromCharCode(r);var e="";return 0==(4294965248&r)?e=String.fromCharCode(r>>6&31|192):0==(4294901760&r)?(this.checkScalarValue(r),e=String.fromCharCode(r>>12&15|224),e+=this.createByte(r,6)):0==(4292870144&r)&&(e=String.fromCharCode(r>>18&7|240),e+=this.createByte(r,12),e+=this.createByte(r,6)),e+String.fromCharCode(63&r|128)}encode(r){for(var e=this.ucs2decode(r),t=e.length,n=-1,o="";++n<t;)o+=this.encodeCodePoint(e[n]);return o}readContinuationByte(){if(this.byteIndex>=this.byteCount)throw Error("Invalid byte index");var r=255&this.byteArray[this.byteIndex];if(this.byteIndex++,128==(192&r))return 63&r;throw Error("Invalid continuation byte")}decodeSymbol(){var r,e;if(this.byteIndex>this.byteCount)throw Error("Invalid byte index");if(this.byteIndex==this.byteCount)return!1;if(r=255&this.byteArray[this.byteIndex],this.byteIndex++,0==(128&r))return r;if(192==(224&r)){if((e=(31&r)<<6|this.readContinuationByte())>=128)return e;throw Error("Invalid continuation byte")}if(224==(240&r)){if((e=(15&r)<<12|this.readContinuationByte()<<6|this.readContinuationByte())>=2048)return this.checkScalarValue(e),e;throw Error("Invalid continuation byte")}if(240==(248&r)&&(e=(7&r)<<18|this.readContinuationByte()<<12|this.readContinuationByte()<<6|this.readContinuationByte())>=65536&&e<=1114111)return e;throw Error("Invalid UTF-8 detected")}decode(r){this.byteArray=this.ucs2decode(r),this.byteCount=this.byteArray.length,this.byteIndex=0;for(var e,t=[];!1!==(e=this.decodeSymbol());)t.push(e);return this.ucs2encode(t)}}}
// prettier-ignore
function Base64(){return new class{constructor(){this.TABLE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",this.REGEX_SPACE_CHARACTERS=/[\t\n\f\r ]/g}InvalidCharacterError(message){this.message=message}error(message){throw new this.InvalidCharacterError(message)}decode(input){var length=(input=String(input).replace(this.REGEX_SPACE_CHARACTERS,"")).length;length%4==0&&(length=(input=input.replace(/==?$/,"")).length),(length%4==1||/[^+a-zA-Z0-9/]/.test(input))&&this.error("Invalid character: the string to be decoded is not correctly encoded.");for(var bitCounter=0,bitStorage,buffer,output="",position=-1;++position<length;)buffer=this.TABLE.indexOf(input.charAt(position)),bitStorage=bitCounter%4?64*bitStorage+buffer:buffer,bitCounter++%4&&(output+=String.fromCharCode(255&bitStorage>>(-2*bitCounter&6)));return output}encode(input){input=String(input),/[^\0-\xFF]/.test(input)&&this.error("The string to be encoded contains characters outside of the Latin1 range.");for(var padding=input.length%3,output="",position=-1,a,b,c,buffer,length=input.length-padding;++position<length;)buffer=(a=input.charCodeAt(position)<<16)+(b=input.charCodeAt(++position)<<8)+(c=input.charCodeAt(++position)),output+=this.TABLE.charAt(buffer>>18&63)+this.TABLE.charAt(buffer>>12&63)+this.TABLE.charAt(buffer>>6&63)+this.TABLE.charAt(63&buffer);return 2==padding?(buffer=(a=input.charCodeAt(position)<<8)+(b=input.charCodeAt(++position)),output+=this.TABLE.charAt(buffer>>10)+this.TABLE.charAt(buffer>>4&63)+this.TABLE.charAt(buffer<<2&63)+"="):1==padding&&(buffer=input.charCodeAt(position),output+=this.TABLE.charAt(buffer>>2)+this.TABLE.charAt(buffer<<4&63)+"=="),output}}}
// prettier-ignore
function Env(t, e) { class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `\ud83d\udd14${this.name}, \u5f00\u59cb!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), a = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(a, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t) { let e = { "M+": (new Date).getMonth() + 1, "d+": (new Date).getDate(), "H+": (new Date).getHours(), "m+": (new Date).getMinutes(), "s+": (new Date).getSeconds(), "q+": Math.floor(((new Date).getMonth() + 3) / 3), S: (new Date).getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, ((new Date).getFullYear() + "").substr(4 - RegExp.$1.length))); for (let s in e) new RegExp("(" + s + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? e[s] : ("00" + e[s]).substr(("" + e[s]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============\ud83d\udce3\u7cfb\u7edf\u901a\u77e5\ud83d\udce3=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `\u2757\ufe0f${this.name}, \u9519\u8bef!`, t.stack) : this.log("", `\u2757\ufe0f${this.name}, \u9519\u8bef!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `\ud83d\udd14${this.name}, \u7ed3\u675f! \ud83d\udd5b ${s} \u79d2`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
